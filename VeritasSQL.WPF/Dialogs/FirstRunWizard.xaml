<Window x:Class="VeritasSQL.WPF.Dialogs.FirstRunWizard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Welcome to VeritasSQL" Height="550" Width="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="20">
            <StackPanel>
                <TextBlock Text="ðŸš€ Welcome to VeritasSQL" 
                          FontSize="24" FontWeight="Bold" 
                          Foreground="White" Margin="0,0,0,5"/>
                <TextBlock x:Name="StepTitleTextBlock" 
                          Text="Let's get you started" 
                          FontSize="14" 
                          Foreground="#ECF0F1"/>
            </StackPanel>
        </Border>

        <!-- Content Area -->
        <Border Grid.Row="1" Padding="30" Background="White">
            <Grid>
                <!-- Step 1: Welcome -->
                <StackPanel x:Name="WelcomeStep" Visibility="Visible">
                    <TextBlock TextWrapping="Wrap" FontSize="14" Margin="0,0,0,20" LineHeight="24">
                        <Run Text="VeritasSQL transforms natural language questions into secure SQL queries with AI-powered insights." FontWeight="Bold"/>
                        <LineBreak/><LineBreak/>
                        <Run Text="This wizard will help you:"/>
                        <LineBreak/>
                        <Run Text="â€¢ Configure your OpenAI API Key"/>
                        <LineBreak/>
                        <Run Text="â€¢ Set up your first database connection"/>
                        <LineBreak/>
                        <Run Text="â€¢ Get started with your first query"/>
                    </TextBlock>
                    <TextBlock Text="Ready to begin?" FontSize="16" FontWeight="Bold" Margin="0,20,0,0"/>
                </StackPanel>

                <!-- Step 2: API Key -->
                <StackPanel x:Name="ApiKeyStep" Visibility="Collapsed">
                    <TextBlock Text="OpenAI API Key Configuration" 
                              FontSize="16" FontWeight="Bold" 
                              Margin="0,0,0,15"/>
                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" LineHeight="20">
                        VeritasSQL uses OpenAI's GPT-5.1 to translate natural language into SQL queries. 
                        You'll need an API key from OpenAI to use this feature.
                    </TextBlock>
                    <TextBlock Text="OpenAI API Key:" FontWeight="Bold" Margin="0,10,0,5"/>
                    <PasswordBox x:Name="ApiKeyPasswordBox" 
                                 Margin="0,0,0,10"
                                 ToolTip="Enter your OpenAI API Key (starts with sk-...)"/>
                    <Button Content="Get API Key from OpenAI" 
                            Click="GetApiKeyButton_Click"
                            HorizontalAlignment="Left"
                            Margin="0,0,0,10"
                            Style="{StaticResource {x:Type Button}}"
                            Padding="10,5"/>
                    <TextBlock TextWrapping="Wrap" FontSize="11" Foreground="#666" Margin="0,5,0,0">
                        <Run Text="ðŸ’¡ Tip: "/>
                        <Run Text="You can skip this step and configure it later in Settings. However, AI features won't work without an API key."/>
                    </TextBlock>
                </StackPanel>

                <!-- Step 3: Connection (Optional) -->
                <StackPanel x:Name="ConnectionStep" Visibility="Collapsed">
                    <TextBlock Text="Database Connection (Optional)" 
                              FontSize="16" FontWeight="Bold" 
                              Margin="0,0,0,15"/>
                    <TextBlock TextWrapping="Wrap" Margin="0,0,0,15" LineHeight="20">
                        You can set up your first database connection now, or do it later from the main window.
                    </TextBlock>
                    <CheckBox x:Name="SkipConnectionCheckBox" 
                             Content="Skip connection setup for now" 
                             IsChecked="True"
                             Margin="0,10,0,0"/>
                    <StackPanel x:Name="ConnectionFormPanel" 
                               IsEnabled="{Binding IsChecked, ElementName=SkipConnectionCheckBox, Converter={StaticResource InverseBoolConverter}}"
                               Margin="0,15,0,0">
                        <TextBlock Text="Connection Name:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="ConnectionNameTextBox" Margin="0,0,0,10"/>
                        <TextBlock Text="Server:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="ServerTextBox" Margin="0,0,0,10" 
                                ToolTip="e.g., localhost or server.domain.com"/>
                        <TextBlock Text="Database:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <TextBox x:Name="DatabaseTextBox" Margin="0,0,0,10"/>
                        <TextBlock Text="Authentication:" FontWeight="Bold" Margin="0,0,0,5"/>
                        <ComboBox x:Name="AuthTypeComboBox" Margin="0,0,0,10">
                            <ComboBoxItem Content="Windows Authentication" Tag="Windows" IsSelected="True"/>
                            <ComboBoxItem Content="SQL Server Authentication" Tag="SqlServer"/>
                        </ComboBox>
                    </StackPanel>
                </StackPanel>

                <!-- Step 4: Complete -->
                <StackPanel x:Name="CompleteStep" Visibility="Collapsed">
                    <TextBlock Text="âœ… Setup Complete!" 
                              FontSize="18" FontWeight="Bold" 
                              Margin="0,0,0,20" 
                              HorizontalAlignment="Center"/>
                    <TextBlock TextWrapping="Wrap" FontSize="14" Margin="0,0,0,20" LineHeight="24" TextAlignment="Center">
                        You're all set! VeritasSQL is ready to use.
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#666" Margin="0,20,0,0">
                        <Run Text="Next steps:" FontWeight="Bold"/>
                        <LineBreak/>
                        <Run Text="1. Connect to your database (if not done yet)"/>
                        <LineBreak/>
                        <Run Text="2. Load the schema"/>
                        <LineBreak/>
                        <Run Text="3. Ask your first question in natural language!"/>
                    </TextBlock>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Progress Indicator -->
        <Border Grid.Row="2" Background="#ECF0F1" Padding="15,10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Ellipse x:Name="Step1Indicator" Width="12" Height="12" Fill="#3498DB" Margin="5"/>
                <Rectangle Width="30" Height="2" Fill="#BDC3C7" Margin="5,0" VerticalAlignment="Center"/>
                <Ellipse x:Name="Step2Indicator" Width="12" Height="12" Fill="#BDC3C7" Margin="5"/>
                <Rectangle Width="30" Height="2" Fill="#BDC3C7" Margin="5,0" VerticalAlignment="Center"/>
                <Ellipse x:Name="Step3Indicator" Width="12" Height="12" Fill="#BDC3C7" Margin="5"/>
                <Rectangle Width="30" Height="2" Fill="#BDC3C7" Margin="5,0" VerticalAlignment="Center"/>
                <Ellipse x:Name="Step4Indicator" Width="12" Height="12" Fill="#BDC3C7" Margin="5"/>
            </StackPanel>
        </Border>

        <!-- Buttons -->
        <Border Grid.Row="3" Background="#F5F5F5" BorderBrush="#DDD" BorderThickness="0,1,0,0" Padding="15">
            <Grid>
                <Button x:Name="BackButton" Content="Back" 
                       Width="80" 
                       HorizontalAlignment="Left"
                       Click="BackButton_Click"
                       IsEnabled="False"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="SkipButton" Content="Skip" 
                           Width="80" 
                           Margin="0,0,10,0"
                           Click="SkipButton_Click"
                           Visibility="Collapsed"/>
                    <Button x:Name="NextButton" Content="Next" 
                           Width="80" 
                           Margin="0,0,10,0"
                           Click="NextButton_Click"/>
                    <Button x:Name="FinishButton" Content="Finish" 
                           Width="80"
                           Click="FinishButton_Click"
                           Visibility="Collapsed"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>

